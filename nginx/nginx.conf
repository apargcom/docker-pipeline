upstream backend {
    least_conn;
    server 172.17.0.1:3001 weight=1;
    server 172.17.0.1:3002 weight=1;
    server 172.17.0.1:3003 weight=1;
}

server {
    listen 3000;
    server_name localhost;
    location / {
        proxy_pass http://backend;
    }
}